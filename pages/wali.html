<!DOCTYPE html>
<html>
<head>
  <title>Wali Kelas</title>
</head>
<body>

<h2 id="judul">Wali Kelas</h2>

<table border="1">
  <thead>
    <tr>
      <th>Nama</th>
      <th>Nilai</th>
      <th>Aksi</th>
    </tr>
  </thead>
  <tbody id="tabelSiswa">
  </tbody>
</table>

<script src="data-siswa.js"></script>

<script>
  // CEK APAKAH SCRIPT JALAN
  console.log("Script wali jalan");

  var kelasLogin = localStorage.getItem("kelas");

  if (!kelasLogin) {
    alert("Kelas belum ditemukan. Login ulang.");
  }

  document.getElementById("judul").innerText =
    "Data Siswa Kelas " + kelasLogin;

  var tabel = document.getElementById("tabelSiswa");

  dataSiswa.forEach(function(siswa, index) {
    if (siswa.kelas === kelasLogin) {
      var row = `
        <tr>
          <td>${siswa.nama}</td>
          <td>${siswa.nilai}</td>
          <td>
            <button onclick="hapusSiswa(${index})">Hapus</button>
          </td>
        </tr>
      `;
      tabel.innerHTML += row;
    }
  });

  function hapusSiswa(index) {
    if (confirm("Yakin ingin menghapus siswa ini?")) {
      dataSiswa.splice(index, 1);
      localStorage.setItem("dataSiswa", JSON.stringify(dataSiswa));
      location.reload();
    }
  }
</script>

</body>
</html>
